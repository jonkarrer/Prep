<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="/pages/recipe/all/all_recipes.css" />
    <script type="module" src="/pages/global/components/index.js"></script>

    <title>Your Recipes</title>
  </head>
  <body>
    <header class="Header">
      <a href="/usr/account">
        <div class="UserProfileButton">
          <svg
            width="100%"
            height="100%"
            viewBox="0 0 90 90"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M90 45.0143C90.0048 37.5252 88.1391 30.1534 84.5723 23.5675C81.0056 16.9817 75.8505 11.3903 69.5747 7.30042C63.2989 3.21057 56.1011 0.751733 48.634 0.14694C41.167 -0.457854 33.667 0.810536 26.8145 3.83706C19.962 6.86358 13.9737 11.5525 9.3929 17.4784C4.81208 23.4043 1.78366 30.3797 0.582346 37.7719C-0.618967 45.1641 0.0448399 52.7392 2.51356 59.81C4.98227 66.8808 9.17778 73.2236 14.7195 78.2631C14.8291 78.3931 14.9567 78.5069 15.0984 78.6009C23.3273 85.9426 33.9712 90.0002 45.0007 90C56.0302 89.9998 66.6739 85.942 74.9026 78.6C75.0436 78.5064 75.1706 78.3932 75.2797 78.2637C79.918 74.055 83.6239 68.9224 86.1591 63.1961C88.6942 57.4697 90.0026 51.2764 90 45.0143ZM3.6 45.0143C3.59527 38.2102 5.26871 31.5098 8.47218 25.5064C11.6756 19.503 16.3103 14.3818 21.9659 10.5961C27.6214 6.81038 34.1234 4.47702 40.8962 3.80256C47.669 3.1281 54.5037 4.13335 60.7952 6.72931C67.0867 9.32528 72.6408 13.4319 76.966 18.6855C81.2912 23.9392 84.254 30.1779 85.5921 36.8493C86.9301 43.5206 86.6022 50.4189 84.6373 56.9334C82.6724 63.4478 79.1312 69.3775 74.3271 74.1974C69.859 66.7173 62.6901 61.2361 54.2986 58.8841C58.1987 56.8102 61.293 53.4919 63.0893 49.4574C64.8855 45.4228 65.2805 40.9036 64.2114 36.6187C63.1424 32.3338 60.6706 28.5294 57.1894 25.8108C53.7082 23.0921 49.4175 21.6152 45 21.6152C40.5824 21.6152 36.2918 23.0921 32.8106 25.8108C29.3294 28.5294 26.8576 32.3338 25.7886 36.6187C24.7195 40.9036 25.1145 45.4228 26.9107 49.4574C28.707 53.4919 31.8013 56.8102 35.7014 58.8841C27.31 61.2362 20.1411 66.7172 15.6729 74.1972C11.842 70.3638 8.80411 65.8136 6.73262 60.8063C4.66114 55.799 3.59666 50.4329 3.6 45.0143ZM45 57.6103C41.7959 57.6103 38.6638 56.6605 35.9998 54.881C33.3357 53.1015 31.2593 50.5722 30.0331 47.613C28.807 44.6537 28.4862 41.3975 29.1113 38.256C29.7364 35.1145 31.2793 32.2289 33.5449 29.964C35.8105 27.6991 38.697 26.1567 41.8395 25.5318C44.982 24.9069 48.2393 25.2276 51.1995 26.4534C54.1596 27.6791 56.6897 29.7549 58.4698 32.4181C60.2499 35.0813 61.2 38.2124 61.2 41.4155C61.1952 45.7091 59.4868 49.8255 56.4498 52.8616C53.4127 55.8977 49.295 57.6055 45 57.6103ZM18.3891 76.6919C21.0607 71.9907 24.9307 68.0813 29.6051 65.3616C34.2796 62.6419 39.5915 61.2091 44.9999 61.2092C50.4084 61.2092 55.7203 62.642 60.3948 65.3617C65.0692 68.0815 68.9391 71.9909 71.6106 76.6921C64.1622 82.9625 54.7375 86.4012 44.9998 86.4011C35.2622 86.4011 25.8375 82.9624 18.3891 76.6919Z"
              fill="black"
            />
          </svg>
        </div>
      </a>

      <div class="Header__right-panel">
        <a class="ActionButton" href="/recipe/create">
          <div class="ActionButton__text--left">Create</div>

          <div class="ActionButton__icon">
            <svg
              width="100%"
              height="100%"
              viewBox="0 0 90 90"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M41.9867 8.83929H48.0135C48.5492 8.83929 48.817 9.10714 48.817 9.64286V80.3571C48.817 80.8929 48.5492 81.1607 48.0135 81.1607H41.9867C41.451 81.1607 41.1831 80.8929 41.1831 80.3571V9.64286C41.1831 9.10714 41.451 8.83929 41.9867 8.83929Z"
                fill="#000"
              />
              <path
                d="M11.2501 41.183H78.7501C79.2858 41.183 79.5537 41.4509 79.5537 41.9866V48.0134C79.5537 48.5491 79.2858 48.817 78.7501 48.817H11.2501C10.7144 48.817 10.4465 48.5491 10.4465 48.0134V41.9866C10.4465 41.4509 10.7144 41.183 11.2501 41.183Z"
                fill="#000"
              />
            </svg>
          </div>
        </a>

        <div class="SearchBar">
          <input
            placeholder="Search"
            type="search"
            name="search"
            id="search_box"
            oninput="searchRecipes(event)"
            class="SearchBar__input"
          />

          <div class="SearchBar__icon">
            <svg
              width="100%"
              height="100%"
              viewBox="0 0 90 90"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M84.9375 79.4029L58.8515 53.317C62.8995 48.0837 65.0893 41.6853 65.0893 34.9554C65.0893 26.8996 61.9453 19.346 56.26 13.6507C50.5748 7.95535 43.0011 4.82143 34.9553 4.82143C26.9096 4.82143 19.3359 7.9654 13.6507 13.6507C7.95534 19.3359 4.82141 26.8996 4.82141 34.9554C4.82141 43.0011 7.96538 50.5748 13.6507 56.26C19.3359 61.9554 26.8995 65.0893 34.9553 65.0893C41.6853 65.0893 48.0736 62.8996 53.3069 58.8616L79.3928 84.9375C79.4693 85.014 79.5602 85.0748 79.6601 85.1162C79.7601 85.1576 79.8672 85.1789 79.9754 85.1789C80.0836 85.1789 80.1908 85.1576 80.2907 85.1162C80.3907 85.0748 80.4815 85.014 80.558 84.9375L84.9375 80.5681C85.014 80.4916 85.0747 80.4008 85.1162 80.3008C85.1576 80.2008 85.1789 80.0937 85.1789 79.9855C85.1789 79.8773 85.1576 79.7701 85.1162 79.6702C85.0747 79.5702 85.014 79.4794 84.9375 79.4029ZM50.8661 50.8661C46.6071 55.115 40.962 57.4554 34.9553 57.4554C28.9486 57.4554 23.3036 55.115 19.0446 50.8661C14.7957 46.6071 12.4553 40.9621 12.4553 34.9554C12.4553 28.9487 14.7957 23.2935 19.0446 19.0446C23.3036 14.7958 28.9486 12.4554 34.9553 12.4554C40.962 12.4554 46.6172 14.7857 50.8661 19.0446C55.1149 23.3036 57.4553 28.9487 57.4553 34.9554C57.4553 40.9621 55.1149 46.6172 50.8661 50.8661Z"
                fill="#000"
              />
            </svg>
          </div>
        </div>
      </div>
    </header>

    <main>
      {% if no_recipes %}
      <section class="EmptyRecipeSection">
        <h2>
          You don't have any recipes, <br />let's make
          <span>one.</span>
        </h2>
        <a href="/recipe/create"> Create First Recipe </a>
      </section>
      {% else %}
      <ul id="list_container">
        {% for recipe in recipes %}
        <div class="RecipeCard">
          <div class="RecipeCard__top-row">
            <a
              data-title="{{ recipe.recipe_title }}"
              href="/recipe/select/{{ recipe.recipe_id }}"
            >
              <h1 class="RecipeCard__title">{{ recipe.recipe_title }}</h1>
            </a>

            <div class="ModifyTools">
              <form action="/recipe/delete/{{ recipe.recipe_id }}" method="get">
                <input
                  type="hidden"
                  name="csrf_token"
                  value="{{ csrf_token }}"
                />
                <button type="submit" class="ModifyTools__icon">
                  <svg
                    width="100%"
                    height="100%"
                    viewBox="0 0 90 90"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M22.9723 77.9464H67.0281L69.4589 26.5179H20.5415L22.9723 77.9464Z"
                    />
                    <path
                      d="M80.3573 19.2857H67.5001V11.25C67.5001 7.70425 64.6173 4.82144 61.0716 4.82144H28.9287C25.383 4.82144 22.5001 7.70425 22.5001 11.25V19.2857H9.643C7.86509 19.2857 6.42871 20.7221 6.42871 22.5V25.7143C6.42871 26.1563 6.79032 26.5179 7.23228 26.5179H13.2992L15.7803 79.0514C15.941 82.4766 18.7736 85.1786 22.1988 85.1786H67.8015C71.2367 85.1786 74.0593 82.4866 74.22 79.0514L76.701 26.5179H82.768C83.21 26.5179 83.5716 26.1563 83.5716 25.7143V22.5C83.5716 20.7221 82.1352 19.2857 80.3573 19.2857ZM29.7323 12.0536H60.268V19.2857H29.7323V12.0536ZM67.028 77.9464H22.9722L20.5414 26.5179H69.4588L67.028 77.9464Z"
                      fill="#000"
                    />
                  </svg>
                </button>
              </form>

              <a
                class="ModifyTools__icon"
                href="/recipe/modify/{{ recipe.recipe_id }}"
              >
                <svg
                  width="100%"
                  height="100%"
                  viewBox="0 0 90 90"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M70.0213 22.5301L62.6585 15.1674L26.2266 51.5893L24.6597 60.529L33.5894 58.952L70.0213 22.5301Z"
                  />
                  <path
                    d="M81.9641 77.5447H8.03557C6.25767 77.5447 4.82129 78.981 4.82129 80.7589V84.375C4.82129 84.817 5.1829 85.1786 5.62486 85.1786H84.3749C84.8168 85.1786 85.1784 84.817 85.1784 84.375V80.7589C85.1784 78.981 83.7421 77.5447 81.9641 77.5447ZM19.4563 69.1072C19.6572 69.1072 19.8581 69.0871 20.059 69.0569L36.9541 66.0938C37.155 66.0536 37.3458 65.9632 37.4865 65.8125L80.0657 23.2333C80.1588 23.1403 80.2327 23.03 80.2831 22.9085C80.3335 22.7869 80.3595 22.6567 80.3595 22.5251C80.3595 22.3936 80.3335 22.2633 80.2831 22.1418C80.2327 22.0203 80.1588 21.9099 80.0657 21.817L63.3715 5.11274C63.1807 4.92189 62.9295 4.82144 62.6583 4.82144C62.3871 4.82144 62.136 4.92189 61.9452 5.11274L19.3659 47.692C19.2153 47.8426 19.1249 48.0234 19.0847 48.2243L16.1215 65.1194C16.0238 65.6575 16.0587 66.2113 16.2232 66.7329C16.3878 67.2545 16.6769 67.7281 17.0657 68.1127C17.7287 68.7556 18.5624 69.1072 19.4563 69.1072ZM26.2264 51.5893L62.6583 15.1674L70.0211 22.5301L33.5891 58.952L24.6595 60.529L26.2264 51.5893Z"
                    fill="#000"
                  />
                </svg>
              </a>
            </div>
          </div>

          <div class="TagBar">
            <p class="TagBar__tag">{{ recipe.servings }} Servings</p>
            {% for tag in recipe.tags %}
            <p class="TagBar__tag">{{ tag.tag_name }}</p>
            {% endfor %}
          </div>
        </div>
        {% endfor %}
      </ul>
      {% endif %}
    </main>

    <script>
      function searchRecipes(e) {
        console.log("comment");
        let listContainer = document.getElementById("list_container");
        let searchValue = e.target.value.toLowerCase();
        let recipes = listContainer.querySelectorAll("a");

        for (recipe of recipes) {
          let recipeName = recipe.dataset.title.toLowerCase();
          if (!recipeName.startsWith(searchValue)) {
            recipe.classList.add("hidden");
          } else {
            recipe.classList.remove("hidden");
          }
        }
      }

      function navigate(path) {
        window.location = path;
      }
    </script>
  </body>
</html>
