<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="/pages/recipe/all/all_recipes.css" />
    <script type="module" src="/pages/global/components/index.js"></script>

    <title>Your Recipes</title>
  </head>
  <body>
    <header>
      <input
        placeholder="Search"
        type="search"
        name="search"
        id="search_box"
        oninput="searchRecipes(event)"
      />
      <button>
        <a href="/recipe/create">Create</a>
      </button>
    </header>
    <main>
      <ul id="list_container">
        {% for recipe in recipes %}
        <a href="/recipe/select/{{ recipe.recipe_id }}">
          <li class="RecipeCard">
            <div class="RecipeCard__header">
              <span>Thu, Oct 5 2023</span>
              <span>Edit</span>
            </div>

            <h2 class="RecipeCard__title">{{ recipe.recipe_title }}</h2>
            <div class="RecipeCard__directions">
              <ol>
                <li>
                  Borem ipsum dolor sit amet, consectetur adipiscing elit. Etiam
                  eu turpis molestie, dictum est a, mattis
                </li>
                <li>
                  tellus. Sed dignissim, metus nec fringilla accumsan, risus sem
                  sollicitudin lacus, ut interdum tellus elit
                </li>
              </ol>
            </div>

            <div class="RecipeCard__footer">
              <span>6 servings</span>

              <div class="RecipeCard__tag-container">
                <span>Tag Name</span>
                <span>Tag Name</span>
              </div>
            </div>
          </li>
        </a>
        {% endfor %}
      </ul>
    </main>

    <app-bar></app-bar>
    <script>
      function searchRecipes(e) {
        console.log("comment");
        let listContainer = document.getElementById("list_container");
        let searchValue = e.target.value.toLowerCase();
        let recipes = listContainer.querySelectorAll("a");

        for (recipe of recipes) {
          let recipeName = recipe.innerText.toLowerCase();
          if (!recipeName.startsWith(searchValue)) {
            recipe.parentElement.classList.add("hidden");
          } else {
            recipe.parentElement.classList.remove("hidden");
          }
        }
      }
    </script>
  </body>
</html>
