<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="/styles/recipe/create_recipe.css" />
    <script type="module" src="/scripts/components/index.js"></script>

    <title>Create Recipe</title>
  </head>

  <body>
    <div class="Toast" id="toast">
      <p id="toast_message">An error has occurred</p>
    </div>

    <template id="RecipeIngredient">
      <div class="StagedIngredient">
        <input type="text" name="ingredient" placeholder="ingredient" />
        <input type="number" name="amount" placeholder="amount" />
        <input type="text" name="unit" placeholder="unit" />
      </div>
    </template>
    <template id="RecipeDirection">
      <textarea type="text" name="direction" placeholder="direction"></textarea>
    </template>
    <template id="RecipeTag">
      <input type="text" name="tag" placeholder="tag" />
    </template>

    <main>
      <header>
        <button><a href="/recipe/all">Back</a></button>
        <nav>
          <span id="general_nav">General</span>
          <span id="ingredient_nav">Ingredients</span>
          <span id="direction_nav">Directions</span>
        </nav>
      </header>

      <div id="direction_controller" class="DirectionController">
        <span
          class="IngredientController__add-button"
          id="create_direction_button"
          >Plus
        </span>
        <textarea
          id="direction_controller_direction"
          placeholder="Input direction"
        ></textarea>
      </div>

      <div id="ingredient_controller" class="IngredientController">
        <div class="flex justify-space-between">
          <div class="IngredientController__amount-wrapper">
            <div
              id="fraction_hint"
              class="IngredientController__fraction-hint"
            ></div>
            <input
              type="number"
              name="amount"
              placeholder="amount"
              id="ingredient_controller_amount"
            />
          </div>

          <div class="IngredientController__unit-wrapper">
            <input
              type="text"
              name="unit"
              placeholder="unit"
              id="ingredient_controller_unit"
            />
          </div>

          <span
            class="IngredientController__add-button"
            id="create_ingredient_button"
            >Plus
          </span>
        </div>

        <div class="IngredientController__ingredient-wrapper">
          <input
            type="text"
            name="ingredient"
            placeholder="ingredient"
            id="ingredient_controller_ingredient"
          />
        </div>
      </div>

      <form id="recipe_form" action="/recipe/create" method="POST">
        <section id="general_section" class="General">
          <h2>New Recipe</h2>
          <input type="text" name="title" placeholder="title" />
          <br />
          <input type="number" name="servings" placeholder="servings" />
          <h4>Tags</h4>
          <recipe-tag></recipe-tag>

          <h4>Ingredients</h4>
          <div id="ingredients_preview">
            <div id="preview_ingredient_anchor"></div>
          </div>

          <h4>Directions</h4>
          <ol id="directions_preview">
            <div id="preview_direction_anchor"></div>
          </ol>

          <button type="submit">Submit</button>
        </section>

        <section id="ingredient_section" class="Ingredients">
          <h3>Ingredients</h3>
          <div id="staged_ingredient_anchor"></div>
        </section>
        <section id="direction_section" class="Directions">
          <h3>Directions</h3>
          <ol>
            <div id="staged_direction_anchor"></div>
          </ol>
        </section>
      </form>
    </main>

    <app-bar></app-bar>

    <script type="module" src="/scripts/recipe/create/index.js"></script>
  </body>
</html>
